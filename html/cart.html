<!DOCTYPE html>
<html lang="JP">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ReLAB</title>
    <link rel="icon" type="image/x-icon" href="./IMG/favicon.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="./css/reset.css" rel="stylesheet" />
    <link href="./css/cart.css" rel="stylesheet" />
  </head>
  <body>
    <!--nav-->
    <div class="navigation">
      <div class="left-container">
        <a href="../index.html"> <img src="./IMG/LOGO.png" /> </a>
      </div>
      <div class="right-container">
        <a href="./about.html" class="right-menu" id="about1">About</a>
        <a href="./catalogp2.html" class="right-menu">Catalog</a>
        <a href="./shop.html" class="right-menu">Shop</a>
        <a href="./cart.html" class="right-menu">Cart</a>
        <a href="#" class="right-menu">EN</a>
      </div>
    </div>

    <div class="gray-bar">
      <label class="checkbox">
        <input type="checkbox" checked="checked" />
        <span class="checkmark"></span>
      </label>
      <p class="bar1">商品</p>
      <p class="bar2">数量</p>
      <p class="bar3">価額</p>
    </div>

    <div class="shoplist-container">
      <div class="shoplist1">
        <label class="checkbox">
          <input type="checkbox" checked="checked" />
          <span class="checkmark"></span>
        </label>
        <div class="shopimg">
          <div class="shop-left">
            <img src="./IMG/web2-1-1.png" />
            <p class="expnum">ReLAB EXP.001</p>
            <p class="name">紅茶</p>
          </div>
        </div>

        <div class="input-group1">
          <input
            type="button"
            value="-"
            class="button-minus"
            data-field="quantity"
          />
          <input
            type="number"
            step="1"
            max=""
            value="1"
            name="quantity"
            class="quantity-field"
          />
          <input
            type="button"
            value="+"
            class="button-plus"
            data-field="quantity"
          />
        </div>

        <div class="price">
          <p>￥180</p>
        </div>

        <div class="delete">
          <svg
            version="1.1"
            id="layer1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px"
            y="0px"
            viewBox="0 0 48 48"
            style="enable-background: new 0 0 48 48"
            xml:space="preserve"
          >
            <path
              class="st0"
              d="M13.1,42c-0.8,0-1.5-0.3-2.1-0.9c-0.6-0.6-0.9-1.3-0.9-2.1V10.5H8v-3h9.4V6h13.2v1.5H40v3h-2V39
	c0,0.8-0.3,1.5-0.9,2.1C36.5,41.7,35.8,42,35,42H13.1z M35,10.5H13.1V39H35V10.5z M18.4,34.7h3v-20h-3V34.7z M26.6,34.7h3v-20h-3
	V34.7z M13.1,10.5V39V10.5z"
            />
          </svg>
        </div>
      </div>

      <div class="shoplist1">
        <label class="checkbox">
          <input type="checkbox" checked="checked" />
          <span class="checkmark"></span>
        </label>

        <div class="shopimg">
          <div class="shop-left">
            <img src="./IMG/web2-4.png" />
            <p class="expnum">ReLAB EXP.001</p>
            <p class="name">烏龍茶</p>
          </div>
        </div>

        <div class="input-group1">
          <input
            type="button"
            value="-"
            class="button-minus"
            data-field="quantity"
          />
          <input
            type="number"
            step="1"
            max=""
            value="1"
            name="quantity"
            class="quantity-field"
          />
          <input
            type="button"
            value="+"
            class="button-plus"
            data-field="quantity"
          />
        </div>

        <div class="price">
          <p>￥180</p>
        </div>

        <div class="delete">
          <svg
            version="1.1"
            id="圖層_1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px"
            y="0px"
            viewBox="0 0 48 48"
            style="enable-background: new 0 0 48 48"
            xml:space="preserve"
          >
            <path
              class="st0"
              d="M13.1,42c-0.8,0-1.5-0.3-2.1-0.9c-0.6-0.6-0.9-1.3-0.9-2.1V10.5H8v-3h9.4V6h13.2v1.5H40v3h-2V39
	c0,0.8-0.3,1.5-0.9,2.1C36.5,41.7,35.8,42,35,42H13.1z M35,10.5H13.1V39H35V10.5z M18.4,34.7h3v-20h-3V34.7z M26.6,34.7h3v-20h-3
	V34.7z M13.1,10.5V39V10.5z"
            />
          </svg>
        </div>
      </div>
    </div>

    <div class="sum">
      <p class="sumbig">合計</p>
      <div class="line1">
        <p>小計</p>
        <p class="roman">￥360</p>
      </div>
      <div class="line1">
        <p>運料</p>
        <p class="roman">￥300</p>
      </div>
      <a href="./regi.html"
        ><input type="submit" value="ご購入の手続きへ" class="inputbtn"
      /></a>
    </div>

    <!-- JavaScript Bundle with Popper -->
    <script src="./js/bootstrap.bundle.min.js"></script>
    <script>
      function incrementValue(e) {
        e.preventDefault();
        var fieldName = $(e.target).data("field");
        var parent = $(e.target).closest("div");
        var currentVal = parseInt(
          parent.find("input[name=" + fieldName + "]").val(),
          10
        );

        if (!isNaN(currentVal)) {
          parent.find("input[name=" + fieldName + "]").val(currentVal + 1);
        } else {
          parent.find("input[name=" + fieldName + "]").val(0);
        }
      }

      function decrementValue(e) {
        e.preventDefault();
        var fieldName = $(e.target).data("field");
        var parent = $(e.target).closest("div");
        var currentVal = parseInt(
          parent.find("input[name=" + fieldName + "]").val(),
          10
        );

        if (!isNaN(currentVal) && currentVal > 0) {
          parent.find("input[name=" + fieldName + "]").val(currentVal - 1);
        } else {
          parent.find("input[name=" + fieldName + "]").val(0);
        }
      }

      $(".input-group1").on("click", ".button-plus", function (e) {
        incrementValue(e);
      });

      $(".input-group1").on("click", ".button-minus", function (e) {
        decrementValue(e);
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // 獲取 URL 查詢參數
        const urlParams = new URLSearchParams(window.location.search);

        // 獲取商品信息
        const product = urlParams.get("product");
        const quantity = urlParams.get("quantity");

        // 動態生成購物車項目
        if (product && quantity) {
          const cartContainer = document.querySelector(".shoplist-container");

          const cartItem = document.createElement("div");
          cartItem.classList.add("shoplist1");

          cartItem.innerHTML = `
            <!-- 商品圖片區域 -->
            <label class="checkbox">
              <input type="checkbox" checked="checked" />
              <span class="checkmark"></span>
            </label>
            <div class="shopimg">
              <div class="shop-left">
                <img src="./IMG/${product}.png" /> <!-- 假設商品圖片以商品名命名 -->
                <p class="expnum">ReLAB EXP.001</p>
                <p class="name">${product}</p>
              </div>
            </div>

            <!-- 數量選擇區域 -->
            <div class="input-group1">
              <input type="button" value="-" class="button-minus" data-field="quantity" />
              <input type="number" step="1" max="" value="${quantity}" name="quantity" class="quantity-field" />
              <input type="button" value="+" class="button-plus" data-field="quantity" />
            </div>

            <!-- 商品價格區域 -->
            <div class="price">
              <p>￥130</p> <!-- 這裡價格可能需要根據實際情況動態生成 -->
            </div>

            <!-- 刪除按鈕區域 -->
            <div class="delete">
              <!-- SVG 刪除圖示 -->
            </div>
          `;

          // 將購物車項目添加到購物車容器中
          cartContainer.appendChild(cartItem);
        }
      });
    </script>
  </body>
</html>
